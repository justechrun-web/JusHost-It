
{
  "entities": {
    "user": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email"
        },
        "company": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "role": {
          "type": "string",
          "enum": [
            "user",
            "admin"
          ]
        }
      },
      "required": [
        "email",
        "createdAt",
        "role"
      ]
    },
    "site": {
      "title": "Site",
      "description": "A website hosted on the platform.",
      "type": "object",
      "properties": {
        "domain": {
          "type": "string"
        },
        "plan": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": [
            "Provisioning",
            "Active",
            "Suspended"
          ]
        },
        "ownerId": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "stripeSubscriptionId": {
          "type": "string"
        },
        "billingStatus": {
          "type": "string",
          "enum": [
            "active",
            "past_due",
            "canceled"
          ]
        },
        "region": {
          "type": "string"
        },
        "events": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              }
            },
            "required": [
              "type",
              "message",
              "timestamp"
            ]
          }
        },
        "containerId": {
            "type": "string"
        }
      },
      "required": [
        "domain",
        "plan",
        "status",
        "ownerId",
        "createdAt"
      ]
    },
    "audit_log": {
      "title": "Audit Log",
      "description": "A log of administrative actions.",
      "type": "object",
      "properties": {
        "adminId": {
          "type": "string"
        },
        "action": {
          "type": "string"
        },
        "targetId": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "metadata": {
          "type": "object"
        }
      },
      "required": [
        "adminId",
        "action",
        "targetId",
        "timestamp"
      ]
    },
    "site_metric": {
      "title": "Site Metric",
      "description": "Resource usage metrics for a site.",
      "type": "object",
      "properties": {
        "cpu": {
          "type": "string"
        },
        "memory": {
          "type": "string"
        },
        "disk": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "cpu",
        "memory",
        "disk",
        "timestamp"
      ]
    },
    "access_review": {
      "title": "Access Review",
      "description": "A log of quarterly admin access reviews.",
      "type": "object",
      "properties": {
        "reviewerId": {
          "type": "string"
        },
        "reviewedAt": {
          "type": "string",
          "format": "date-time"
        },
        "adminCount": {
          "type": "number"
        },
        "notes": {
          "type": "string"
        }
      },
      "required": [
        "reviewerId",
        "reviewedAt",
        "adminCount"
      ]
    }
  },
  "auth": {
    "providers": [
      "email"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/user"
      },
      "description": "User profile data."
    },
    "/sites/{siteId}": {
      "schema": {
        "$ref": "#/entities/site"
      },
      "description": "Hosted site data."
    },
    "/audit_logs/{logId}": {
      "schema": {
        "$ref": "#/entities/audit_log"
      },
      "description": "Admin audit trail."
    },
    "/site_metrics/{siteId}": {
      "schema": {
        "$ref": "#/entities/site_metric"
      },
      "description": "Site resource usage metrics."
    },
    "/access_reviews/{reviewId}": {
      "schema": {
        "$ref": "#/entities/access_review"
      },
      "description": "Logs of quarterly access reviews."
    }
  }
}
